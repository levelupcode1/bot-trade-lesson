# API 연동 및 데이터 수집 실습 평가

## 실습 개요
본 실습은 Cursor AI를 활용하여 암호화폐 거래소 API를 연동하고 데이터를 수집하는 능력을 평가합니다. 업비트 API와 CoinGecko API를 활용한 실시간 데이터 수집, 오류 처리, 데이터 저장 등의 핵심 기능을 구현합니다.

---

## 문항 1: 업비트 API를 활용한 비트코인 현재가 조회 함수 개발

### 문제 조건

Cursor AI를 활용하여 업비트 API를 사용한 비트코인 현재가 조회 함수를 개발하시오.

#### 필수 요구사항
1. **함수명**: `get_bitcoin_price`
2. **API 엔드포인트**: 업비트 공개 API `/v1/ticker` 사용
3. **재시도 로직**: 
   - API 호출 실패 시 최대 3회까지 재시도
   - 각 재시도 간격은 1초로 설정
4. **Rate Limit 준수**: 
   - 초당 10회 요청 제한 준수
   - 최소 0.1초 간격으로 요청 제어
5. **에러 처리**: 
   - try-except를 활용한 예외 처리
   - logging 모듈을 활용한 로그 기록
6. **코드 품질**: 
   - 타입 힌트 포함
   - docstring 포함

#### Cursor AI 프롬프트 작성 조건
다음 필수 키워드를 포함해야 함:
- "함수"
- "에러 처리"
- "예외 처리"
- "재시도"
- "로깅"
- "타입 힌트"
- "docstring"

프롬프트에는 다음을 구체적으로 명시:
- 함수명
- 입력 파라미터
- 반환값
- 예외 처리 방법

### 정답 기준

#### 1. Cursor AI 프롬프트 작성 (25점)
**예시 프롬프트:**
```
업비트 API를 사용하여 비트코인 현재가를 조회하는 함수를 만들어줘. 
함수명은 get_bitcoin_price, requests.get을 사용하고, 
실패 시 최대 3회 재시도하며 각 재시도 간격은 1초, 
Rate Limit 준수를 위해 최소 0.1초 간격, 
try-except로 예외 처리, logging으로 로그 기록, 
타입 힌트와 docstring 포함
```

**채점 기준:**
- 필수 키워드 모두 포함 (15점)
- 함수명, 파라미터, 반환값, 예외 처리 명시 (10점)

#### 2. 함수 구조 및 API 호출 구현 (25점)
- requests 라이브러리를 사용한 HTTP GET 요청 구현 (15점)
- 업비트 API 엔드포인트 `/v1/ticker` 정확히 사용 (10점)

#### 3. 재시도 로직 구현 (25점)
- try-except를 활용한 예외 처리 (10점)
- 최대 3회 재시도 로직 구현 (10점)
- time.sleep을 활용한 1초 간격 재시도 (5점)

#### 4. Rate Limit 준수 및 로깅 구현 (25점)
- Rate Limit 준수를 위한 최소 0.1초 간격 제어 (15점)
- logging 모듈을 활용한 로그 기록 (10점)

### 해설
Cursor AI를 활용하여 업비트 API의 공개 엔드포인트(/v1/ticker)를 사용한 비트코인 현재가 조회 함수를 개발하고, 네트워크 오류나 타임아웃 발생 시 자동으로 재시도하는 안정적인 데이터 수집 시스템을 구현할 수 있는지 평가합니다. 효과적인 프롬프트 작성 능력과 AI 도구 활용 능력을 함께 평가합니다.

---

## 문항 2: CoinGecko API를 활용한 다중 암호화폐 가격 조회 및 CSV 저장 시스템 개발

### 문제 조건

Cursor AI를 활용하여 CoinGecko API를 사용한 다중 암호화폐(BTC, ETH, XRP) 가격 조회 및 CSV 저장 시스템을 개발하시오.

#### 필수 요구사항
1. **API 엔드포인트**: CoinGecko API `/simple/price` 사용
2. **조회 대상**: 
   - Bitcoin (BTC)
   - Ethereum (ETH)
   - Ripple (XRP)
3. **통화**: KRW, USD 두 가지 통화로 조회
4. **CSV 파일 구조**:
   - 컬럼: timestamp, coin_name, price_krw, price_usd
   - 파일 모드: 'a' (append) - 기존 데이터에 추가
5. **데이터 검증**: 
   - 타임스탬프 생성 (datetime.now() 사용)
   - 데이터 유효성 검증
6. **에러 처리**: 
   - API 호출 실패 시 처리
   - 파일 저장 실패 시 처리

#### Cursor AI 프롬프트 작성 조건
다음 필수 키워드를 포함해야 함:
- "함수"
- "클래스"
- "에러 처리"
- "파일 처리"
- "CSV"
- "타임스탬프"
- "데이터 검증"

프롬프트에는 다음을 구체적으로 명시:
- API 엔드포인트
- 파라미터 (ids, vs_currencies)
- CSV 컬럼 구조
- 파일 모드

### 정답 기준

#### 1. Cursor AI 프롬프트 작성 및 필수 키워드 포함 (25점)
**예시 프롬프트:**
```
CoinGecko API의 /simple/price 엔드포인트를 사용하여 BTC, ETH, XRP 가격을 조회하고 CSV 파일로 저장하는 함수를 만들어줘. 
ids=['bitcoin', 'ethereum', 'ripple'], 
vs_currencies=['krw', 'usd'], 
CSV 컬럼은 timestamp, coin_name, price_krw, price_usd, 
파일 모드는 'a'(append), 
datetime.now()로 타임스탬프 생성, 
에러 처리 및 데이터 검증 포함
```

**채점 기준:**
- 필수 키워드 모두 포함 (15점)
- API 엔드포인트, 파라미터, CSV 구조, 파일 모드 명시 (10점)

#### 2. API 호출 및 다중 코인/통화 조회 (25점)
- CoinGecko API의 /simple/price 엔드포인트 사용 (10점)
- ids 파라미터로 여러 코인 지정 (8점)
- vs_currencies로 다중 통화 지정 (7점)

#### 3. CSV 파일 구조 설계 및 Append 방식 구현 (30점)
- CSV 컬럼 구조 정확히 구현 (timestamp, coin_name, price_krw, price_usd) (15점)
- 파일 모드 'a'(append) 사용 (10점)
- csv 모듈 또는 pandas를 활용한 CSV 파일 작성 (5점)

#### 4. 타임스탬프 및 데이터 검증 (20점)
- datetime.now()로 타임스탬프 생성 (10점)
- 데이터 검증 로직 구현 (10점)

### 해설
Cursor AI를 활용하여 다중 암호화폐 데이터를 효율적으로 수집하고 영구 저장하는 능력을 평가합니다. CSV 파일을 활용한 데이터 영구 저장은 프로그램 재시작 후에도 데이터를 보존하는 중요한 방법입니다. 프롬프트 작성 능력도 함께 평가합니다.

---

## 문항 3: 업비트 API JWT 토큰 기반 인증을 사용한 계좌 잔고 조회 함수 개발

### 문제 조건

Cursor AI를 활용하여 업비트 API의 JWT 토큰 기반 인증을 사용한 계좌 잔고 조회 함수를 개발하시오.

#### 필수 요구사항
1. **함수명**: `get_account_balance`
2. **API 엔드포인트**: `/v1/accounts`
3. **JWT 토큰 생성 필수 요소**:
   - access_key: API 접근 키
   - nonce: 유니크 값 (uuid4 사용)
   - query_hash: 쿼리 파라미터의 SHA512 해시
   - query_hash_alg: SHA512
4. **인증 헤더**: Authorization 헤더에 Bearer 토큰 포함
5. **보안 고려사항**:
   - API 키는 환경 변수(os.getenv)로 관리
   - 하드코딩 금지
6. **에러 처리**: 
   - 인증 실패 시 처리
   - API 호출 실패 시 처리
   - 타입 힌트 포함

#### Cursor AI 프롬프트 작성 조건
다음 필수 키워드를 포함해야 함:
- "함수"
- "JWT"
- "인증"
- "보안"
- "환경 변수"
- "에러 처리"
- "타입 힌트"

프롬프트에는 다음을 구체적으로 명시:
- JWT 토큰 생성 단계
- 필수 파라미터 (nonce, query_hash)
- API 키 관리 방법 (os.getenv 사용)
- 헤더 설정

### 정답 기준

#### 1. Cursor AI 프롬프트 작성 및 필수 키워드 포함 (25점)
**예시 프롬프트:**
```
업비트 API JWT 토큰을 생성하여 계좌 잔고를 조회하는 함수를 만들어줘. 
함수명은 get_account_balance, 
JWT 토큰 생성에 필요한 access_key, nonce(uuid4), query_hash(SHA512), query_hash_alg, 
Authorization 헤더에 Bearer 토큰 포함, 
API 키는 os.getenv로 환경 변수에서 가져오기, 
에러 처리 및 타입 힌트 포함, 
/v1/accounts 엔드포인트 사용
```

**채점 기준:**
- 필수 키워드 모두 포함 (15점)
- JWT 토큰 생성 단계, 파라미터, API 키 관리 방법, 헤더 설정 명시 (10점)

#### 2. JWT 토큰 생성 로직 이해 및 구현 (35점)
- access_key 사용 (5점)
- nonce(유니크 값, uuid4) 생성 (10점)
- query_hash(쿼리 파라미터의 SHA512 해시) 생성 (10점)
- query_hash_alg(SHA512) 설정 (5점)
- Authorization 헤더에 Bearer 토큰 포함 (5점)

#### 3. 필수 파라미터(nonce, query_hash 등) 설명 (20점)
- nonce의 역할과 생성 방법 설명 (10점)
- query_hash의 역할과 생성 방법 설명 (10점)

#### 4. 보안 고려사항(환경 변수 사용) 및 에러 처리 (20점)
- API 키를 환경 변수(os.getenv)로 관리 (10점)
- 하드코딩 금지 준수 (5점)
- 에러 처리 구현 (5점)

### 해설
Cursor AI를 활용하여 JWT 토큰 기반 인증의 핵심 개념과 보안을 고려한 API 키 관리 방법을 이해하고 있는지 평가합니다. 실제 거래 기능을 사용하기 위한 필수 지식입니다. 프롬프트 작성 능력도 함께 평가합니다.

---

## 문항 출제 목표
- Cursor AI를 활용한 개발 능력 평가
- 프롬프트 작성 능력 평가
- 업비트 API 및 CoinGecko API 활용 능력 평가
- 오류 처리 및 보안 의식 평가
- 데이터 영구 저장 능력 평가

## 총 배점
- 문항 1: 100점
- 문항 2: 100점
- 문항 3: 100점
- **총점: 300점**
